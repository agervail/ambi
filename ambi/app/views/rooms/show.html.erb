<header class="row">
  <div class="col-lg-12">
    <h1>
      <%= @room.name %>
    </h1>
  </div>
</header>

<div class="row" id="add_video">
  <%= form_for :song, url: "/songs/" + @room.id.to_s, method: :post, remote:(@player.song_id) do |f| %>
    <%= f.text_field :link, placeholder: 'Lien Youtube', required: true %>
    <%= f.submit value: "Ajouter la video" %>
  <% end %>
</div>

<div class ="row">
    <% if session[:display_video] == true %>
    <div class="col-lg-6">
      <% end %>
      <div class="player">

        <div id="activatePlayer">
          <h3>Lecteur</h3>
          <label class="switch">
            <% if session[:display_video] == true %>
              <input type="checkbox" id="unablePlayer" onchange="triggerPlayer()" checked>
            <% else %>
              <input type="checkbox" id="unablePlayer" onchange="triggerPlayer()">
            <% end %>
            <div class="slider round"></div>
          </label>
        </div>

        <% if session[:display_video] %>
        <div id="player"></div>
        <%= sync partial: 'player_show', resource: @player %>
        <% else %>
        <%= sync partial: 'current_song_title', resource: @player %>
        <% end %>
      </div>
    </div>
<% if session[:display_video] == false %>
  <div class="row">
    <div class="col-lg-4"></div>
    <div class="col-lg-4">
<% else %>
  <div class="col-lg-6">
<% end %>


<h3>Playlist</h3>
<%= sync partial: 'playlist', resource: @room %>

<% if session[:display_video] == false %>
    </div>
  <div class="col-lg-4"></div>

<% else %>
</div>
<% end %>
</div>

<script>
  function triggerPlayer() {
    let display_video = document.getElementById("unablePlayer").checked
    window.location = "<%= '/rooms/join?name=' + @room.name + '&display_video=' %>" + display_video
  }
</script>
